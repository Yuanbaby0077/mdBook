# 缓存

## 强缓存

max-age 设置的是相对时间
`Cache-control: max-age=2592000`

Expires: 设置的是绝对时间，指的是指定时间之后，再发请求浏览器会重新请求服务端
`Expires: Thu, 10 Nov 2017 08:45:11 GMT`

弊端是如果修改了客户端时间，会造成时间客户端与服务器时间不一致。

cache-control 优先于 Expires

## 协商缓存
当强制缓存失效，就用到了协商缓存

浏览器需要向服务器发起请求，如果服务器缓存未失效，则返回304

## 缓存架构

* 内存缓存 不需要考虑更新问题
* 缓存架构的唯一性 =》单例模式
* 有缓存的区域 必包
* 缓存的副作用 v8可以使用的内存


## 优化方向

* 快： 代码执行速度快，1、选择更合适的API 2、算法优化，尽量减少操作步骤
* 小 减小文件体积， 1、工具层面：打包编译压缩 tree-shaking 2、代码质量
* 省 节省http请求（精灵图 缓存）

vue3优化

defineProperty 改成 proxy 为什么更快

defineProperty for in 每个属性

proxy 代理整个对象

算法优化：

diff 算法

vue2 => 所有dom
vue3 => block tree 


## Vue 插件

function a() {

}
a.install = function(vue) {
  vue.mixin({
    methods: {

    },
    data() {
      return {

      }
    }
  })
}
Vue.use(a)

// vue.use
// 问题： 打包结果过大，vuex内容太多
// 解决： 按需加载

import pop from './index.vue'
// pop的选项配置
var vm = Vue.extend(pop)
new vm().mount(dom)

// 单元测试







