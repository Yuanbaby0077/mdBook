# localStorage 和 sessionStorage 和 cookie

区别：
* 有效期

localStorage：永久有效，除非刻意删除
sessionStorage: 一旦脚本所在的最顶层的窗口或者浏览器标签页关闭了，数据就被删除了
cookie：cookie有效期是持续在浏览器的会话期间，一旦用户关闭浏览器，cookie数据就清了，
如果要延长有效期，需要设置`max-age`属性(单位：秒)，一旦设置了有效期，浏览器会把cookie存储在一个文件中，到期删掉文件。

* 作用域

localStorage作用域是文档源，同源的文档间共享localStorage数据，可以读写对方的数据。但是不同的浏览器之间不共享

sessionStorage的作用域也是文档源，但不同窗口的同源的文档之间数据不能共享。如果一个浏览器标签页包含2个iframe元素，则这俩iframe元素之间可以共享sessionStorage

cookie的作用域是通过文档源和文档路径来确定的。该作用域可以通过`domain`和`path`来设置。默认情况下，`cookie`的作用域和创建它的web页面有关，包含该web页面同目录或者子目录下的页面可见。
比如，当前的web页面URL = `http://127.0.0.1:5501/src/chapter/major/学习记录/2021-08-20内存泄漏.html`，该页面设置了`document.cookie = 'name=zs'`

默认情况下，`http://127.0.0.1:5501/src/chapter/major/学习记录/**`页面也能访问到该cookie。而`http://127.0.0.1:5501/src/chapter/major/前端异常监控.html`中访问不到。

如果设置了`path = '/'`，等于是`cookie`和`localStorage`的作用域是一样的。

如果想让web应用的子域之间共享cookie，可以通过设置`domain`属性。
如果`virtual.pa.com.cn`下创建了一个`cookie`，`path = '/',domain='.pa.com.cn'`，那么`*.pa.com.cn`均可访问该`cookie`。默认情况下，`domain`属性为当前服务器的主机名，例如：本机为`127.0.0.1`

cookie的局限性：

每个cookie的大小不能超过4KB，每个web服务器保存的cookie不超过20个。整个浏览器保存的cookie不超过300个（现代浏览器允许超过300）
